"use strict";(self.webpackChunkdocs_new=self.webpackChunkdocs_new||[]).push([[4321],{2633:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/pat_dialog_box-94096855c2f18dd3950f7c1cc74d29bf.png"},11830:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/pat_section_1-bf5faa63f2e28cc1eca72591a2f25390.png"},26979:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/account_security_settings-83772901845fb713e2e160a2aabc8e45.png"},65537:(e,t,n)=>{n.d(t,{A:()=>v});var a=n(96540),s=n(18215),o=n(65627),r=n(56347),i=n(50372),c=n(30604),l=n(11861),u=n(78749);function p(e){return a.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function d(e){const{values:t,children:n}=e;return(0,a.useMemo)((()=>{const e=t??function(e){return p(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:s}}=e;return{value:t,label:n,attributes:a,default:s}}))}(n);return function(e){const t=(0,l.XI)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function h(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function m(e){let{queryString:t=!1,groupId:n}=e;const s=(0,r.W6)(),o=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,c.aZ)(o),(0,a.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(s.location.search);t.set(o,e),s.replace({...s.location,search:t.toString()})}),[o,s])]}function f(e){const{defaultValue:t,queryString:n=!1,groupId:s}=e,o=d(e),[r,c]=(0,a.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!h({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:o}))),[l,p]=m({queryString:n,groupId:s}),[f,g]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[s,o]=(0,u.Dv)(n);return[s,(0,a.useCallback)((e=>{n&&o.set(e)}),[n,o])]}({groupId:s}),y=(()=>{const e=l??f;return h({value:e,tabValues:o})?e:null})();(0,i.A)((()=>{y&&c(y)}),[y]);return{selectedValue:r,selectValue:(0,a.useCallback)((e=>{if(!h({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);c(e),p(e),g(e)}),[p,g,o]),tabValues:o}}var g=n(9136);const y={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=n(74848);function A(e){let{className:t,block:n,selectedValue:a,selectValue:r,tabValues:i}=e;const c=[],{blockElementScrollPositionUntilNextRender:l}=(0,o.a_)(),u=e=>{const t=e.currentTarget,n=c.indexOf(t),s=i[n].value;s!==a&&(l(t),r(s))},p=e=>{let t=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const n=c.indexOf(e.currentTarget)+1;t=c[n]??c[0];break}case"ArrowLeft":{const n=c.indexOf(e.currentTarget)-1;t=c[n]??c[c.length-1];break}}t?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":n},t),children:i.map((e=>{let{value:t,label:n,attributes:o}=e;return(0,b.jsx)("li",{role:"tab",tabIndex:a===t?0:-1,"aria-selected":a===t,ref:e=>{c.push(e)},onKeyDown:p,onClick:u,...o,className:(0,s.A)("tabs__item",y.tabItem,o?.className,{"tabs__item--active":a===t}),children:n??t},t)}))})}function x(e){let{lazy:t,children:n,selectedValue:o}=e;const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=r.find((e=>e.props.value===o));return e?(0,a.cloneElement)(e,{className:(0,s.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:r.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==o})))})}function _(e){const t=f(e);return(0,b.jsxs)("div",{className:(0,s.A)("tabs-container",y.tabList),children:[(0,b.jsx)(A,{...t,...e}),(0,b.jsx)(x,{...t,...e})]})}function v(e){const t=(0,g.A)();return(0,b.jsx)(_,{...e,children:p(e.children)},String(t))}},74373:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/create_pat_community-d959af95291b2bf5506f6c2e51f22827.png"},79329:(e,t,n)=>{n.d(t,{A:()=>r});n(96540);var a=n(18215);const s={tabItem:"tabItem_Ymn6"};var o=n(74848);function r(e){let{children:t,hidden:n,className:r}=e;return(0,o.jsx)("div",{role:"tabpanel",className:(0,a.A)(s.tabItem,r),hidden:n,children:t})}},99958:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>h,contentTitle:()=>d,default:()=>g,frontMatter:()=>p,metadata:()=>a,toc:()=>m});const a=JSON.parse('{"id":"control/authentication/pat","title":"Personal Access Tokens","description":"Authenticate access to your own resources and those outside the scope of your apps","source":"@site/docs/control/authentication/pat.md","sourceDirName":"control/authentication","slug":"/control/authentication/pat","permalink":"/control/authentication/pat","draft":false,"unlisted":false,"editUrl":"https://github.com/Clarifai/docs/blob/main/docs/control/authentication/pat.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"description":"Authenticate access to your own resources and those outside the scope of your apps","sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Authentication","permalink":"/control/authentication/"},"next":{"title":"App-Specific API Keys","permalink":"/control/authentication/key"}}');var s=n(74848),o=n(28453),r=n(65537),i=n(79329),c=n(58069);const l="##################################################################################################\n# FOR SECURE AUTHENTICATION, SET PAT AS AN ENVIRONMENT VARIABLE\n#################################################################################################\n\n# The built-in Python os library provides functions to access and manipulate environment variables\nimport os\n\n# Python-dotenv reads key-value pairs from a .env file and can set them as environment variables\n# Install the library by running `pip install python-dotenv`\nfrom dotenv import load_dotenv\n\nload_dotenv()\n\n# Set the `CLARIFAI_PAT` environment variable before running the code. For example, you can set it in an .env file as `export CLARIFAI_PAT=YOUR_PAT_HERE`\n# Your PAT can be found in your Clarifai's account Security section\n\nPAT = os.getenv('CLARIFAI_PAT')\nif PAT is None:\n    raise ValueError(\"PAT is not set. Please set the CLARIFAI_PAT environment variable.\")\n\n##################################################################################################\n# In this section, we set the user ID, app ID, model details, and the URL\n# of the image we want as an input. Change these strings to run your own example.\n#################################################################################################\n\n# Specify the correct user_id/app_id pairings\n# Since you're making inferences outside your app's scope\nUSER_ID = 'clarifai'\nAPP_ID = 'main'\nMODEL_ID = 'general-image-recognition'\n# This is optional. You can specify a model version or the empty string for the default\nMODEL_VERSION_ID = ''\nIMAGE_URL = 'https://samples.clarifai.com/metro-north.jpg'\n\n############################################################################\n# YOU DO NOT NEED TO CHANGE ANYTHING BELOW THIS LINE TO RUN THIS EXAMPLE\n############################################################################\n\nfrom clarifai_grpc.channel.clarifai_channel import ClarifaiChannel\nfrom clarifai_grpc.grpc.api import resources_pb2, service_pb2, service_pb2_grpc\nfrom clarifai_grpc.grpc.api.status import status_code_pb2\n\nchannel = ClarifaiChannel.get_grpc_channel()\nstub = service_pb2_grpc.V2Stub(channel)\n\nmetadata = (('authorization', 'Key ' + PAT),)\n\nuserDataObject = resources_pb2.UserAppIDSet(user_id=USER_ID, app_id=APP_ID)\n\npost_model_outputs_response = stub.PostModelOutputs(\n    service_pb2.PostModelOutputsRequest(\n        user_app_id=userDataObject,  # The userDataObject is created in the overview and is required when using a PAT\n        model_id=MODEL_ID,\n        version_id=MODEL_VERSION_ID,  \n        inputs=[\n            resources_pb2.Input(\n                data=resources_pb2.Data(\n                    image=resources_pb2.Image(\n                        url=IMAGE_URL\n                    )\n                )\n            )\n        ]\n    ),\n    metadata=metadata\n)\nif post_model_outputs_response.status.code != status_code_pb2.SUCCESS:\n    print(post_model_outputs_response.status)\n    raise Exception(\"Post model outputs failed, status: \" + post_model_outputs_response.status.description)\n\n# Since we have one input, one output will exist here\noutput = post_model_outputs_response.outputs[0]\n\nprint(\"Predicted concepts:\")\nfor concept in output.data.concepts:\n    print(\"%s %.2f\" % (concept.name, concept.value))\n\n# Uncomment this line to print the full Response JSON\n#print(output)\n",u='curl -X POST "https://api.clarifai.com/v2/users/clarifai/apps/main/models/general-image-recognition/versions/aa7f35c01e0642fda5cf400f543e7c40/outputs" \\\n    -H "Authorization: Key YOUR_PAT_HERE" \\\n    -H "Content-Type: application/json" \\\n    -d \'{\n      "inputs": [\n        {\n          "data": {\n            "image": {\n              "url": "https://samples.clarifai.com/metro-north.jpg"\n            }\n          }\n        }\n      ]\n    }\'\n   ',p={description:"Authenticate access to your own resources and those outside the scope of your apps",sidebar_position:1},d="Personal Access Tokens",h={},m=[{value:"How to Create a PAT on the Platform",id:"how-to-create-a-pat-on-the-platform",level:2},{value:"How to Use a PAT Example",id:"how-to-use-a-pat-example",level:2}];function f(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"personal-access-tokens",children:"Personal Access Tokens"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Authenticate access to your own resources and those outside the scope of your apps"})}),"\n",(0,s.jsx)("hr",{}),"\n",(0,s.jsx)(t.p,{children:"A Personal Access Token (usually shortened as PAT) is a kind of key that authenticates a user across all applications they have access to. It's not linked to a specific application."}),"\n",(0,s.jsx)(t.p,{children:"A PAT represents you when accessing the Clarifai API. It's a powerful way of accessing your resources within the Clarifai platform."}),"\n",(0,s.jsx)(t.p,{children:"You can use PATs to accomplish the following:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Access multiple apps with a single key. This lets you access your own apps as well as any other apps you have permissions to use, such as public apps, apps where you're added as a collaborator, or apps belonging to your organization's team."}),"\n",(0,s.jsx)(t.li,{children:"Create apps and app-specific keys programmatically through the API. This is crucial for programs that segregate the data of each of their end-users into different apps."}),"\n"]}),"\n",(0,s.jsx)(t.admonition,{type:"info",children:(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"PAT is the primary authentication mechanism we use."}),"\n",(0,s.jsxs)(t.li,{children:["When using a PAT, you need to specify the ",(0,s.jsx)(t.strong,{children:"user ID"})," alongside the ",(0,s.jsx)(t.strong,{children:"application ID"})," of the owner of the resource you want to access \u2014 be it your own or for another user. If accessing your own resources, you specify your own ",(0,s.jsx)(t.code,{children:"user_id"})," and ",(0,s.jsx)(t.code,{children:"app_id"}),"; if you don't own them, specify the owner's ",(0,s.jsx)(t.code,{children:"user_id"})," and ",(0,s.jsx)(t.code,{children:"app_id"}),"."]}),"\n"]})}),"\n",(0,s.jsx)(t.admonition,{title:"PAT Versus API Key",type:"caution",children:(0,s.jsxs)(t.p,{children:["A PAT allows you to make inferences on resources that are outside the scope of your apps. ",(0,s.jsx)(t.a,{href:"https://docs.clarifai.com/clarifai-basics/authentication/app-specific-api-keys",children:"An API Key"})," only allows you to access resources scoped to the app defined by that key. So, you can use an API Key to access your own resources, but not Clarifai's or other public resources."]})}),"\n",(0,s.jsx)(t.h2,{id:"how-to-create-a-pat-on-the-platform",children:"How to Create a PAT on the Platform"}),"\n",(0,s.jsx)(t.p,{children:"A default PAT is automatically generated for you when you create an account on the Clarifai platform. Nonetheless, you can also create a new PAT explicitly on the platform."}),"\n",(0,s.jsxs)(t.p,{children:["To create it, ",(0,s.jsx)(t.a,{href:"https://clarifai.com/login",children:"log in"})," to the platform, navigate to the upper-right section of the navigation bar, and click your user\u2019s profile icon."]}),"\n",(0,s.jsxs)(t.p,{children:["Select the ",(0,s.jsx)(t.strong,{children:"Security"})," settings option in the drop-down list."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Create new PAT on Community",src:n(74373).A+"",width:"1882",height:"872"})}),"\n",(0,s.jsxs)(t.p,{children:["On the ensuing ",(0,s.jsx)(t.strong,{children:"Security"})," page, click the ",(0,s.jsx)(t.strong,{children:"Create Personal Access Token"})," button."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Account security settings",src:n(26979).A+"",width:"1879",height:"885"})}),"\n",(0,s.jsxs)(t.p,{children:["On the form that pops up, provide a short token description, set the scopes you want to apply, and click the ",(0,s.jsx)(t.strong,{children:"Confirm"})," button."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"create pat",src:n(2633).A+"",width:"1891",height:"859"})}),"\n",(0,s.jsxs)(t.p,{children:["You can find the new PAT listed on the ",(0,s.jsx)(t.strong,{children:"Personal Access Token"})," section, where you can copy it to the clipboard, edit it, or delete it."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"listed pat",src:n(11830).A+"",width:"1539",height:"325"})}),"\n",(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"PATs do not expire. In case your PAT gets compromised, you should delete it, and create a new one with the same scopes."}),"\n",(0,s.jsxs)(t.li,{children:["We recommend that you do ",(0,s.jsx)(t.strong,{children:"not"})," share your PAT with other users."]}),"\n"]})}),"\n",(0,s.jsx)(t.h2,{id:"how-to-use-a-pat-example",children:"How to Use a PAT Example"}),"\n",(0,s.jsxs)(t.p,{children:["Here is an example of how to use a PAT to make a prediction request from Clarifai's ",(0,s.jsx)(t.a,{href:"https://clarifai.com/clarifai/main/models/general-image-recognition",children:(0,s.jsx)(t.code,{children:"general-image-recognition"})})," model."]}),"\n",(0,s.jsxs)(t.p,{children:["Note that you need to specify the resource owner's ",(0,s.jsx)(t.code,{children:"user_id"})," and ",(0,s.jsx)(t.code,{children:"app_id"})," in the ",(0,s.jsx)(t.code,{children:"UserAppIDSet"}),", if making a gRPC call, or in the URL, if making a REST call."]}),"\n",(0,s.jsx)(t.admonition,{title:"Set PAT as an Environment Variable",type:"tip",children:(0,s.jsx)(t.p,{children:"It's a good practice to load your PAT from an environment variable. Keeping your PAT in a secrets manager, and not in the source code, improves its security and management."})}),"\n","\n","\n",(0,s.jsxs)(r.A,{children:[(0,s.jsx)(i.A,{value:"python",label:"Python (gRPC)",children:(0,s.jsx)(c.A,{className:"language-python",children:l})}),(0,s.jsx)(i.A,{value:"curl",label:"cURL",children:(0,s.jsx)(c.A,{className:"language-bash",children:u})})]})]})}function g(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(f,{...e})}):f(e)}}}]);