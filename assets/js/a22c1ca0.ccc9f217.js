"use strict";(self.webpackChunkdocs_new=self.webpackChunkdocs_new||[]).push([[5848],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>h});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=p(a),h=r,m=c["".concat(s,".").concat(h)]||c[h]||u[h]||i;return a?n.createElement(m,o(o({ref:t},d),{},{components:a})):n.createElement(m,o({ref:t},d))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var p=2;p<i;p++)o[p]=a[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},96405:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var n=a(87462),r=(a(67294),a(3905));const i={description:"Export your labeled datasets with their full annotations using this utility",sidebar_position:6},o="Dataset Export",l={unversionedId:"api-guide/advanced-topics/export_labels",id:"api-guide/advanced-topics/export_labels",title:"Dataset Export",description:"Export your labeled datasets with their full annotations using this utility",source:"@site/docs/api-guide/advanced-topics/export_labels.md",sourceDirName:"api-guide/advanced-topics",slug:"/api-guide/advanced-topics/export_labels",permalink:"/api-guide/advanced-topics/export_labels",draft:!1,tags:[],version:"current",sidebarPosition:6,frontMatter:{description:"Export your labeled datasets with their full annotations using this utility",sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"Intelligent Document Processing",permalink:"/api-guide/advanced-topics/intelligent-document-processing"},next:{title:"Community Platform Basics",permalink:"/portal-guide/portal-overview"}},s={},p=[{value:"Installation",id:"installation",level:2},{value:"Usage",id:"usage",level:2},{value:"Classes",id:"classes",level:2},{value:"DatasetExportReader",id:"datasetexportreader",level:3},{value:"InputDownloader",id:"inputdownloader",level:3},{value:"Example",id:"example",level:3}],d={toc:p};function u(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"dataset-export"},"Dataset Export"),(0,r.kt)("p",null,"This Python script allows you to export labeled data from Clarifai's Scribe labeler. The exported data can be saved as a ZIP archive or in a filesystem directory. The script provides two main classes, ",(0,r.kt)("inlineCode",{parentName:"p"},"DatasetExportReader")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"InputDownloader"),", that handle the data export and download processes, respectively."),(0,r.kt)("p",null,"You can find the script in our GitHub ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/Clarifai/clarifai-python-utils"},"clarifai-python-utils repository")," under ",(0,r.kt)("inlineCode",{parentName:"p"},"clarifai/dataset_export")),(0,r.kt)("h2",{id:"installation"},"Installation"),(0,r.kt)("p",null,"Before running this script, make sure you have the following dependencies installed:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Pillow")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"protobuf")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"requests")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"tqdm"))),(0,r.kt)("p",null,"You can install the dependencies using pip:"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"pip install Pillow protobuf requests tqdm")),(0,r.kt)("h2",{id:"usage"},"Usage"),(0,r.kt)("p",null,"To use the script, run it with the following command:"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"python <script_name> <archive-url> [<save-path>]")),(0,r.kt)("p",null,"Replace ",(0,r.kt)("inlineCode",{parentName:"p"},"<script_name>")," with the name of the Python script, ",(0,r.kt)("inlineCode",{parentName:"p"},"<archive-url>")," with the URL of the exported archive, and ",(0,r.kt)("inlineCode",{parentName:"p"},"<save-path>")," (optional) with the path where you want to save the downloaded data. If ",(0,r.kt)("inlineCode",{parentName:"p"},"<save-path>"),' is not provided, the default output will be saved to "output.zip".'),(0,r.kt)("h2",{id:"classes"},"Classes"),(0,r.kt)("h3",{id:"datasetexportreader"},"DatasetExportReader"),(0,r.kt)("p",null,"This class is responsible for unpacking the ZIP file from the exported dataset version. It downloads the archive onto disk and reads the dataset version exports in memory without extracting all contents. It yields each ",(0,r.kt)("inlineCode",{parentName:"p"},"api.Input")," object."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"with DatasetExportReader(archive_url=archive_url) as reader:\n    # Use the reader object to access the dataset\n")),(0,r.kt)("h3",{id:"inputdownloader"},"InputDownloader"),(0,r.kt)("p",null,"This class takes an iterator or a list of ",(0,r.kt)("inlineCode",{parentName:"p"},"api.Input")," instances as input and provides a method to download all inputs (currently only images) of that data. It has the ability to write the downloaded inputs to a new ZIP archive or a filesystem directory."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"input_downloader = InputDownloader(reader)\ninput_downloader.download_image_archive(save_path=save_path)\n")),(0,r.kt)("h3",{id:"example"},"Example"),(0,r.kt)("p",null,"Here's an example of how to use this script with an archive URL and an optional save path:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'import sys\nif len(sys.argv) < 2:\n  print(f"usage: {sys.argv[0]} <archive-url> [<save-path>]")\n  sys.exit(2)\narchive_url = sys.argv[1]\nsave_path = sys.argv[2] if len(sys.argv) > 2 else "output.zip"\n\nwith DatasetExportReader(archive_url=archive_url) as reader:\n  InputDownloader(reader).download_image_archive(save_path=save_path)\n')),(0,r.kt)("p",null,"When executed, this script will download the labeled images from the archive URL and save them to the specified save path."))}u.isMDXComponent=!0}}]);