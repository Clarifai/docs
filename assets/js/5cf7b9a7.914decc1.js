"use strict";(self.webpackChunkdocs_new=self.webpackChunkdocs_new||[]).push([[4349],{15680:(e,t,a)=>{a.d(t,{xA:()=>c,yg:()=>h});var r=a(96540);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,r,o=function(e,t){if(null==e)return{};var a,r,o={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var p=r.createContext({}),l=function(e){var t=r.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=l(e.components);return r.createElement(p.Provider,{value:t},e.children)},d="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var a=e.components,o=e.mdxType,n=e.originalType,p=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=l(a),u=o,h=d["".concat(p,".").concat(u)]||d[u]||g[u]||n;return a?r.createElement(h,i(i({ref:t},c),{},{components:a})):r.createElement(h,i({ref:t},c))}));function h(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var n=a.length,i=new Array(n);i[0]=u;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s[d]="string"==typeof e?e:o,i[1]=s;for(var l=2;l<n;l++)i[l]=a[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}u.displayName="MDXCreateElement"},9405:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>g,frontMatter:()=>n,metadata:()=>s,toc:()=>l});var r=a(58168),o=(a(96540),a(15680));const n={description:"Learn about our algorithmic predict operators",sidebar_position:7},i="Algorithmic Predict",s={unversionedId:"portal-guide/agent-system-operators/algorithmic-predict",id:"portal-guide/agent-system-operators/algorithmic-predict",title:"Algorithmic Predict",description:"Learn about our algorithmic predict operators",source:"@site/docs/portal-guide/agent-system-operators/algorithmic-predict.md",sourceDirName:"portal-guide/agent-system-operators",slug:"/portal-guide/agent-system-operators/algorithmic-predict",permalink:"/portal-guide/agent-system-operators/algorithmic-predict",draft:!1,editUrl:"https://github.com/Clarifai/docs/blob/main/docs/portal-guide/agent-system-operators/algorithmic-predict.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{description:"Learn about our algorithmic predict operators",sidebar_position:7},sidebar:"tutorialSidebar",previous:{title:"ML Predict",permalink:"/portal-guide/agent-system-operators/ml-predict"},next:{title:"Tracker",permalink:"/portal-guide/agent-system-operators/tracker"}},p={},l=[{value:"Regex-Based Classifier",id:"regex-based-classifier",level:2},{value:"KNN Classifier",id:"knn-classifier",level:2},{value:"Language Identification Operator",id:"language-identification-operator",level:2},{value:"Cross-App Input Searcher",id:"cross-app-input-searcher",level:2},{value:"Isolation Operator",id:"isolation-operator",level:2},{value:"Barcode Operator",id:"barcode-operator",level:2},{value:"Custom Code Operator",id:"custom-code-operator",level:2},{value:"AWS Lambda",id:"aws-lambda",level:2},{value:"Input Searcher",id:"input-searcher",level:2},{value:"Image Color Recognizer",id:"image-color-recognizer",level:2}],c={toc:l},d="wrapper";function g(e){let{components:t,...n}=e;return(0,o.yg)(d,(0,r.A)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.yg)("h1",{id:"algorithmic-predict"},"Algorithmic Predict"),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Learn about our algorithmic predict operators")),(0,o.yg)("hr",null),(0,o.yg)("p",null,'Prediction models are the "intelligent" part of your AI workflows. Predictions help you to understand, classify, and organize your data. Predictions can be used to drive behaviors in other nodes in your workflow.'),(0,o.yg)("p",null,"Predictions take specific input types and then return predictions about things like the concepts, regions, poses, characters, words, and the abstract visual characteristics of your inputs."),(0,o.yg)("admonition",{type:"tip"},(0,o.yg)("p",{parentName:"admonition"},'Since the algorithmic predict operators can be "chained" together with models to automate tasks in a workflow, you can learn how to create workflows ',(0,o.yg)("a",{parentName:"p",href:"https://docs.clarifai.com/portal-guide/workflows/input-nodes#create-your-workflow"},"here"),". ")),(0,o.yg)("h2",{id:"regex-based-classifier"},"Regex-Based Classifier"),(0,o.yg)("p",null,"This operator allows you to classify text using regular expressions. When the specified regex pattern matches the text, the text is assigned to one of the predefined concepts. "),(0,o.yg)("p",null,"Let's demonstrate how you can use the Regex-Based Classifier, alongside ",(0,o.yg)("a",{parentName:"p",href:"https://docs.clarifai.com/portal-guide/agent-system-operators/prompter"},"a Prompter template"),", to efficiently classify text. "),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"1"),". Go to the workflow builder. Then, search for the ",(0,o.yg)("strong",{parentName:"p"},"prompter")," template option in the left-hand sidebar and drag it onto the empty workspace."),(0,o.yg)("p",null," Use the pop-up that appears on the right-hand sidebar to set up the template text. For this example, let's use this template text: "),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-text"},'<s>[INST]<<SYS>>Classify the following description into one of the following classes: ["cat", "dog", "cheetah", "lion"]. Respond only with one of the provided classes.<</SYS>>[/INST]\\n{data.text.raw} \n')),(0,o.yg)("admonition",{type:"note"},(0,o.yg)("p",{parentName:"admonition"},"Since we'll use the ",(0,o.yg)("a",{parentName:"p",href:"https://clarifai.com/meta/Llama-2/models/llama2-13b-chat"},"llama2-13b-chat")," model to help with the classification, we format the prompt text using the special tokens it requires for the specific structure of its prompts. We also include the ",(0,o.yg)("inlineCode",{parentName:"p"},"{data.text.raw}")," placeholder to meet the requirements of the ",(0,o.yg)("strong",{parentName:"p"},"Prompter")," template.")),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"2"),". Search for the ",(0,o.yg)("strong",{parentName:"p"},"text-to-text")," option in the left-hand sidebar and drag it onto the workspace. Then, search for the ",(0,o.yg)("strong",{parentName:"p"},"llama2-13b-chat")," model on the right-hand sidebar and connect it to the prompter model. "),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"3"),". Search for the ",(0,o.yg)("strong",{parentName:"p"},"regex-based classifier")," option in the left-hand sidebar and drag it onto the workspace. On the right-hand sidebar, click the ",(0,o.yg)("strong",{parentName:"p"},"SELECT CONCEPTS")," button and use the pop-up that appears to select the relevant ",(0,o.yg)("a",{parentName:"p",href:"https://docs.clarifai.com/portal-guide/concepts/create-get-update-delete"},"concepts")," already existing in your application. For this example, we select the following concepts: ",(0,o.yg)("inlineCode",{parentName:"p"},"cat, dog, cheetah, lion"),"."),(0,o.yg)("p",null,"In the ",(0,o.yg)("strong",{parentName:"p"},"regex")," field, provide the regex pattern that will be used to classify the text. If the pattern matches, the text will be classified as the selected concept. For this example, we provide ",(0,o.yg)("inlineCode",{parentName:"p"},"\\bcat\\b"),', which would match the word "cat" in instances where it appears as a whole word, surrounded by word boundaries.'),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"4"),". Connect the ",(0,o.yg)("strong",{parentName:"p"},"text-to-text")," model with the ",(0,o.yg)("strong",{parentName:"p"},"regex-based classifier")," and save your workflow. "),(0,o.yg)("p",null,(0,o.yg)("img",{src:a(53868).A,width:"1920",height:"849"})),(0,o.yg)("p",null,"To observe it in action, navigate to the workflow's individual page and click the ",(0,o.yg)("strong",{parentName:"p"},"+")," button to input your text. "),(0,o.yg)("p",null,"For this example, let's provide the following input: "),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-text"},"A small, four-legged mammal with soft fur, typically characterized by its whiskers, sharp retractable claws, and acute senses. Known for its independent and curious nature, it often displays a variety of behaviors such as grooming itself, purring, and occasionally hunting. What is this animal?\n")),(0,o.yg)("p",null,"This is the prompt text we get for the model:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-text"},"<s>[INST]<<SYS>>Classify the following description into one of the following classes: [''cat'', ''dog'', ''cheetah'', ''lion'']. Respond only with one of the provided classes.<</SYS>>[/INST]\\nA small, four-legged mammal with soft fur, typically characterized by its whiskers, sharp retractable claws, and acute senses. Known for its independent and curious nature, it often displays a variety of behaviors such as grooming itself, purring, and occasionally hunting. What is this animal?[/INST]\n")),(0,o.yg)("p",null,"The model will process the input and classify the description into one of the provided classes. "),(0,o.yg)("p",null,(0,o.yg)("img",{src:a(20903).A,width:"2861",height:"1669"})),(0,o.yg)("p",null,"Then, the Regex-Based Classifier will categorize the response into one of the provided concepts, which you can feed into other downstream tasks, such as an ",(0,o.yg)("a",{parentName:"p",href:"https://docs.clarifai.com/portal-guide/agent-system-operators/push#annotation-writer"},"Annotation Writer")," to create annotations for inputs."),(0,o.yg)("h2",{id:"knn-classifier"},"KNN Classifier"),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Output"),": Concepts"),(0,o.yg)("p",null,"Use k-nearest neighbors (KNN) search and plurality voting amongst the nearest neighbors to classify new instances. Recommended when you only have a small dataset, like one image per concept. "),(0,o.yg)("h2",{id:"language-identification-operator"},"Language Identification Operator"),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Output"),": Concepts"),(0,o.yg)("p",null,"Operator for language identification using the langdetect library."),(0,o.yg)("h2",{id:"cross-app-input-searcher"},"Cross-App Input Searcher"),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Output"),": Hits"),(0,o.yg)("p",null,"Triggers a visual search in another app based on the model config, if concept(s) are found in images and returns the matched search hits as regions."),(0,o.yg)("h2",{id:"isolation-operator"},"Isolation Operator"),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Output"),": Regions"),(0,o.yg)("p",null,"This is an operator that computes the distance between detections and assigns an isolation label."),(0,o.yg)("h2",{id:"barcode-operator"},"Barcode Operator"),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Output"),": Regions"),(0,o.yg)("p",null,"This is an operator that detects and recognizes barcodes from an image. It assigns regions with barcode text for each detected barcode. Supports EAN/UPC, Code 128, Code 39, Interleaved 2 of 5, and QR Code."),(0,o.yg)("h2",{id:"custom-code-operator"},"Custom Code Operator"),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Output"),": Any"),(0,o.yg)("p",null,"This model expects a Python 3.9 driver function with the following signature: ",(0,o.yg)("inlineCode",{parentName:"p"},"def main(req):"),'. Here, "req" is a dictionary with a single key "inputs" that holds a list of "Input" objects from ',(0,o.yg)("inlineCode",{parentName:"p"},"clarifai_grpc.grpc.api.service_pb2")," \u2014these inputs are normally sent in API prediction requests. "),(0,o.yg)("p",null,"The available libraries for importing are: NumPy, SciPy, PIL, and Clarifai gRPC. The response should be a Python dictionary whose nested structure mirrors that of ",(0,o.yg)("inlineCode",{parentName:"p"},"MultiOutputResponse")," in ",(0,o.yg)("inlineCode",{parentName:"p"},"clarifai_grpc.grpc.api.service_pb2"),". "),(0,o.yg)("p",null,"IDs in inputs should be forwarded to outputs 1-to-1. You can also provide helpers to reference in your main implementation. All the code must be passed in via ",(0,o.yg)("inlineCode",{parentName:"p"},"output_info.params.operator_code"),". "),(0,o.yg)("p",null,"Each execution can last up to 50 seconds and consume 256 MBs of memory."),(0,o.yg)("h2",{id:"aws-lambda"},"AWS Lambda"),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Output"),": Any"),(0,o.yg)("p",null,"This model sends data to an AWS lambda function so you can implement any arbitrary logic to be handled within a model prediction or workflow.\nThe request our API sends is a ",(0,o.yg)("inlineCode",{parentName:"p"},"PostModelOutputsRequest")," in the 'request' field, and the response we expect is a ",(0,o.yg)("inlineCode",{parentName:"p"},"MultiOutputResponse")," response in the ",(0,o.yg)("inlineCode",{parentName:"p"},"response")," field. "),(0,o.yg)("h2",{id:"input-searcher"},"Input Searcher"),(0,o.yg)("h2",{id:"image-color-recognizer"},"Image Color Recognizer"))}g.isMDXComponent=!0},53868:(e,t,a)=>{a.d(t,{A:()=>r});const r=a.p+"assets/images/regex_1-19814ee60bb168392214e78316f92dbf.png"},20903:(e,t,a)=>{a.d(t,{A:()=>r});const r=a.p+"assets/images/regex_2-7e4751d520f49e8daebbc3a53882e57d.png"}}]);